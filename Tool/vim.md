# Vim

## 移动光标

### 单位级

- `h` 向左一字符

- `j` 下一行

- `k` 上一行

- `l` 向右一字符

### 单词级

- `w` or `W` 向右移动到下一单词开头

- `e` or `E` 向右移动到单词结尾

- `b` or `B` 向左移动到单词开头

### 块级

- `gg` 到文档第一行

- `G` 到文档最后一行

- `0` 到行首（第 1 列）

- `^` 到第一个非空白字符

- `$` 到行尾

- `H` 移动到屏幕顶端

- `M` 移动到屏幕中间

- `L` 移动到屏幕底部

- `Ctrl-d` 向下移动半页

- `Ctrl-u` 向上移动半页

- `Ctrl-f` 向下移动一页

- `Ctrl-b` 向上移动一页

- `:<N>` or `<N>gg` 跳转到第 N 行

- `:+<N>` or `<N>j` 向下跳 N 行

- `:-<N>` or `<N>k` 向上跳 N 

### 重复执行命令

所有命令前都可以加一个数字 N，表示对后面的命令执行 N 次

向下移动 3 行，除了可以用 `:+3` 之外，还可以用 `3j` 来实现同样的效果

## 打开文件

- `:e <filename>` 打开名为 filename 的文件，若文件不存在则创建之

- `:Ex` 在 Vim 中打开目录树，光标选中后回车打开对应文件，`-` 进入上级目录

## 查找

### 文档内查找

- `*` 向后查找光标当前所在单词

- `#` 向前查找光标当前所在单词

- `/<search>` 向后查找指定字符串

- `?<search>` 向前查找指定字符串

- `n` 继续查找下一个

- `N` 继续查找上一个

### 行内查找

- `f<X>` 当前行内向行尾方向查找并定位到字符 `X`

- `t<X>` 当前行内向行尾方向查找并定位到字符 `X` 之前

- `F<X>` 当前行内向行首方向查找并定位到字符 `X`

- `T<X>` 当前行内向行首方向查找并定位到字符 `X` 之后

- `;` 继续向当前方向查找下一个字符

- `,` 向当前相反方向查找下一个字符

### 括号匹配

Vim 中可以使用 `%` 对 `(` 和 `)`，`[` 和 `]`，`{` 和 `}` 进行匹配查找，当光标位于其中一个符号上时，按下 `%`，光标会跳到与之匹配的另外一个符号上

## 修改

### 插入

- `i` 当前字符前插入

- `a` 当前字符后插入

- `I` 行首插入

- `A` 行尾插入

- `o` 在下一行插入

- `O` 在上一行插入

### 删除（保存到 Vim 剪贴板）

- `s` 删除当前字符，并进入 `INSERT` 模式

- `S` 删除当前行并保存到 Vim 剪贴板，同时进入 `INSERT` 模式（等同于 `cc`）

- `x` 删除当前字符，相当于 insert 模式下的 `Delete`

- `X` 删除前一个字符，相当于 insert 模式下的 `Backspace`

- `dd` 删除当前行，并将删除的内容保存到 Vim 剪贴板

- `d<X>` 删除指定内容并保存到 Vim 剪贴板

- `cc` 删除当前行并保存到 Vim 剪贴板，同时进入 `INSERT` 模式

- `c<X>` 删除指定内容并保存到 Vim 剪贴板，同时进入 `INSERT` 模式

`<X>` 部分是对操作内容的描述，如果要删除一个单词，就输入 `dw` 或者 `de`，要复制当前
位置到行尾的内容，就输入 `y$`，要删除后面 3 个字符并插入，就输入 `c3l` 诸如此类

### 复制

- `yy` 复制当前行到 Vim 剪贴板

- `y<X>` 复制指定内容到 Vim 剪贴板

### 粘贴

- `p` 在当前位置后粘贴

- `P` 在当前位置前粘贴

### 合并

- `J` 将当前行与下一行合并

### 替换

- `r<X>` 将当前字符替换为 X

- `gu<X>` 将指定的文本转换为小写

- `gU<X>` 将指定的文本转换为大写

### 查找替换

- `/<search>` 查找匹配到的第一个字符串，按 `n` 查找下一个，`N` 查找上一个，默认大小写敏感

- `/<search>\c` 查找时大小写不敏感，`\C` 大小写敏感

- `:[addr]s/<search>/<replace>/[option]` 替换格式

- `addr` 表示检索范围，`%` 整个文件，`.,$` 当前行到文件尾，缺省模式为当前行，可以先选中区域再输入 `:` 即可在选中区域进行替换，`c1,c2` 可指定行进行替换，`.,+n` 在当前行与接下来的 n 行进行替换

- `option` 表示操作类型，`g` 全局替换，`c` 进行确认，`p` 替换结果逐行显示，缺省模式为仅对每行第一个匹配串进行替换

### 撤销、重做

- `u` 撤销

- `Ctrl-r` 重做

### 缩进

- `>>` 向右缩进当前行

- `<<` 向左缩进当前行

### 保存文件

- `:w` 保存当前文件

- `:wa` 保存全部文件

- `:wq` or `ZZ` 保存并退出

- `:q!` or `ZQ` 强制退出，不保存

- `:saveas <new filename>` 文件另存为

- `:w <new filename>` 文件另存一份名为 `<new filename>` 的副本并继续编辑原文件

## 块操作

### 字符选择

`v` 进入字符选择模式，移动光标进行选择

### 行选择

`V` 进入行选择模式，移动光标进行选择

### 块选择

`Ctrl-v` 进入块选择模式，移动光标进行选择

### 块插入

选择好文本块之后，按下 `I` 键可进入块前插入状态

选择好文本块之后，按下 `A` 键可进入块后插入状态

## 窗口操作

### 分屏方式

- `:sp` or `Ctrl-w s` 上下分屏

- `:vs` or `Ctrl-w v` 左右分屏

- `:diffsplit` 缩写 `:diffs` diff 模式打开一个分屏，后面可以加上 {filename}

### 窗口跳转

- `Ctrl-w w` 激活下一个窗口

- `Ctrl-w j` 激活下方窗口

- `Ctrl-w k` 激活上方窗口

- `Ctrl-w h` 激活左侧窗口

- `Ctrl-w l` 激活右侧窗口

### 移动分屏

- `Ctrl-w L` 移动到最右侧

- `Ctrl-w H` 移动到最左侧

- `Ctrl-w K` 移动到顶部

- `Ctrl-w J` 移动到底部

### 屏幕缩放

- `Ctrl-w =` 平均窗口尺寸

- `Ctrl-w +` 增加高度

- `Ctrl-w -` 缩减高度

- `Ctrl-w _` 最大高度

- `Ctrl-w >` 增加宽度

- `Ctrl-w <` 缩减宽度

- `Ctrl-w |` 最大宽度

## 标签页

### 创建标签页

- `:tabnew` or `:tabedit` 缩写 `:tabe` 打开新标签页

- `Ctrl-w gf` 在新标签页中打开当前光标所在位置的文件名

### 显示所有标签页

- `:tabs` 显示当前所有标签页

### 切换标签页

- `gt` or `:tabnext` 缩写 `:tabn` 下一个标签页（最后一个会循环到第一个）

- `gT` or `:tabprevious` 缩写 `:tabp` 上一个标签页（第一个会循环到最后一个）

- `:tabrewind` 缩写 `:tabr` or `:tabfirst` 缩写 `:tabfir` 到第一个

- `:tablast` 缩写 `:tabl` 到最后一个标签页

- `:tabm [num]`:切换指定标签

### 关闭标签页

- `:tabclose` 缩写 `:tabc` 关闭当前标签页

- `:-tabc` 关闭上一个标签页

- `:+tabc` 关闭下一个标签页

- `:tabonly` 缩写 `:tabo` 关闭其他标签页